// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

module("util",function(w,e){function k(a,b,c,d){return j({showHidden:b,seen:[],stylize:d?x:y},a,"undefined"===typeof c?2:c)}function x(a,b){var c=z[b];return c?"\u001b["+u[c][0]+"m"+a+"\u001b["+u[c][1]+"m":a}function y(a){return a}function j(a,b,c){if(b&&"function"===typeof b.inspect&&b.inspect!==e.inspect&&!(b.constructor&&b.constructor.prototype===b))return b.inspect(c);var d=A(a,b);if(d)return d;var l=Object.keys(b),g=a.showHidden?Object.getOwnPropertyNames(b):l;if(0===g.length){if("function"===
typeof b)return a.stylize("[Function"+(b.name?": "+b.name:"")+"]","special");if(m(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(q(b))return a.stylize(Date.prototype.toString.call(b),"date");if(r(b))return"["+Error.prototype.toString.call(b)+"]"}var f="",h=!1,d=["{","}"];v(b)&&(h=!0,d=["[","]"]);"function"===typeof b&&(f=" [Function"+(b.name?": "+b.name:"")+"]");m(b)&&(f=" "+RegExp.prototype.toString.call(b));q(b)&&(f=" "+Date.prototype.toUTCString.call(b));r(b)&&(f=" "+("["+Error.prototype.toString.call(b)+
"]"));if(0===g.length&&(!h||0==b.length))return d[0]+f+d[1];if(0>c)return m(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);if(h){for(var n=[],p=0,k=b.length;p<k;++p)Object.prototype.hasOwnProperty.call(b,String(p))?n.push(s(a,b,c,l,String(p),!0)):n.push("");g.forEach(function(d){d.match(/^\d+$/)||n.push(s(a,b,c,l,d,!0))});g=n}else g=g.map(function(d){return s(a,b,c,l,d,h)});a.seen.pop();var j=0,d=60<g.reduce(function(a,b){j++;0<=b.indexOf("\n")&&
j++;return a+b.length+1},0)?d[0]+(""===f?"":f+"\n ")+" "+g.join(",\n  ")+" "+d[1]:d[0]+f+" "+g.join(", ")+" "+d[1];return d}function A(a,b){switch(typeof b){case "undefined":return a.stylize("undefined","undefined");case "string":var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string");case "number":return a.stylize(""+b,"number");case "boolean":return a.stylize(""+b,"boolean")}if(null===b)return a.stylize("null","null")}function s(a,
b,c,d,e,g){var f,h;b=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]};b.get?h=b.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):b.set&&(h=a.stylize("[Setter]","special"));0>d.indexOf(e)&&(f="["+e+"]");h||(0>a.seen.indexOf(b.value)?(h=null===c?j(a,b.value,null):j(a,b.value,c-1),-1<h.indexOf("\n")&&(h=g?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special"));if("undefined"===
typeof f){if(g&&e.match(/^\d+$/))return h;f=JSON.stringify(""+e);f.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(f=f.substr(1,f.length-2),f=a.stylize(f,"name")):(f=f.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),f=a.stylize(f,"string"))}return f+": "+h}function v(a){return Array.isArray(a)||"object"===typeof a&&"[object Array]"===Object.prototype.toString.call(a)}function m(a){return"object"===typeof a&&"[object RegExp]"===Object.prototype.toString.call(a)}function q(a){return"object"===
typeof a&&"[object Date]"===Object.prototype.toString.call(a)}function r(a){return"object"===typeof a&&"[object Error]"===Object.prototype.toString.call(a)}function t(a){return 10>a?"0"+a.toString(10):a.toString(10)}function B(){var a=new Date,b=[t(a.getHours()),t(a.getMinutes()),t(a.getSeconds())].join(":");return[a.getDate(),C[a.getMonth()],b].join(" ")}var D=/%[sdj%]/g;e.format=function(a){if("string"!==typeof a){for(var b=[],c=0;c<arguments.length;c++)b.push(k(arguments[c]));return b.join(" ")}for(var c=
1,d=arguments,e=d.length,b=String(a).replace(D,function(a){if("%%"===a)return"%";if(c>=e)return a;switch(a){case "%s":return String(d[c++]);case "%d":return Number(d[c++]);case "%j":return JSON.stringify(d[c++]);default:return a}}),g=d[c];c<e;g=d[++c])b=null===g||"object"!==typeof g?b+(" "+g):b+(" "+k(g));return b};e.print=function(){for(var a=0,b=arguments.length;a<b;++a)process.stdout.write(String(arguments[a]))};e.puts=function(){for(var a=0,b=arguments.length;a<b;++a)process.stdout.write(arguments[a]+
"\n")};e.debug=function(a){process.stderr.write("DEBUG: "+a+"\n")};var E=e.error=function(a){for(var b=0,c=arguments.length;b<c;++b)process.stderr.write(arguments[b]+"\n")};e.inspect=k;var u={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},z={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};
e.isArray=v;e.isRegExp=m;e.isDate=q;e.isError=r;e.p=function(){for(var a=0,b=arguments.length;a<b;++a)E(e.inspect(arguments[a]))};module.deprecate("p","Use `util.puts(util.inspect())` instead.");var C="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");e.log=function(a){e.puts(B()+" - "+a.toString())};e.exec=function(){return w("child_process").exec.apply(this,arguments)};module.deprecate("exec","It is now called `child_process.exec`.");e.pump=function(a,b,c){function d(a,b,d){c&&!e&&(c(a,
b,d),e=!0)}var e=!1;a.addListener("data",function(c){!1===b.write(c)&&a.pause()});b.addListener("drain",function(){a.resume()});a.addListener("end",function(){b.end()});a.addListener("close",function(){d()});a.addListener("error",function(a){b.end();d(a)});b.addListener("error",function(b){a.destroy();d(b)})};e.inherits=function(a,b){a.super_=b;a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})};e._extend=function(a,b){if(!b)return a;for(var c=
Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}});